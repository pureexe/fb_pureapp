
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Face Detection jQuery Plugin</title>
<meta name="description" content="A jQuery plugin which detects faces in pictures and returns theirs coords. Face Detection is now available as an easy-to-use jQuery Plugin.">
<link rel="stylesheet" type="text/css" href="css/styles.css"/>
<script src="http://code.jquery.com/jquery-1.4.3.min.js"></script> 
<script src="http://fb.pureapp.in.th/js/facedetection/ccv.js"></script> 
<script src="http://fb.pureapp.in.th/js/facedetection/face.js"></script>
<script src="http://fb.pureapp.in.th/js/jquery.facedetection.js"></script> 
<script>
$(function() {
	$( "#wantmore h6" ).click( function( e ) {
		var $$ = $( this );
			$menu = $( '#wantmore ul' ),
			$arrow = $( '#wantmore .arrow' );

		e.stopPropagation();
		
		if ( $menu.is( ':visible' ) ) {
			$menu.hide();
			$arrow.hide();
			$( '#wantmore' ).removeClass( 'active' );
		} else {
			$menu.fadeIn( 200 );
			$arrow.fadeIn( 200 );
			$( '#wantmore' ).addClass( 'active' );
			$( 'body' ).one( 'click', function() {
				$menu.hide();
				$arrow.hide();
				$( '#wantmore' ).removeClass( 'active' );
			});
		}
	});
	$( "#wantmore li" ).click( function( e ) {
		document.location = $( this ).find( 'a' ).attr( 'href' );
	});
		
	if (!function() {
        // https://github.com/Modernizr/Modernizr/blob/master/modernizr.js
        var elem = document.createElement('canvas');
        return !!(elem.getContext && elem.getContext('2d'));
    }()) {
		$('#overlay').show();
	}	
	
	$('#detect').click(function() {
		var $this = $(this);
		$this.text('Processing...');
		
		setTimeout(function() {
			var coords = $('img').faceDetection({
				complete:function() {
					$this.text('Done!');
				},
				error:function(img, code, message) {
					alert('Error: '+message);
					$this.text('error!');
				}
			});
			for (var i = 0; i < coords.length; i++) {
				$('<div>', {
					'class':'face',
					'css': {
						'position':	'absolute',
						'left':		coords[i].positionX +5+'px',
						'top':		coords[i].positionY +5+'px',
						'width': 	coords[i].width		+'px',
						'height': 	coords[i].height	+'px'
					}
				})
				.appendTo('#content');
			}
		});
	}, 1);
	return false;
});
</script>
<style>
	.face {
		border:2px solid #FFF;
	}
</style>
</head>
<body>
<div id="wantmore">
    <h6>Want more?</h6>
    <ul>
        <li>
            <a href="http://buzz.jaysalvat.com" title="Buzz">Buzz</a>
            <p>A powerful Javascript audio library over the HTML5 audio element.</p>
        </li>
		<li>
			<a href="http://markitup.jaysalvat.com" title="MarkItUp!">MarkItUp!</a>
			<p>A jQuery plugin to turn textareas into a markup editor.</p>
		</li>
        <li>
            <a href="http://vegas.jaysalvat.com" title="Vegas">Vegas</a>
            <p>A jQuery plugin to to add beautiful fullscreen backgrounds to your webpages and create amazing Slideshows.</p>
        </li>
        <li>
            <a href="http://sundaymorning.jaysalvat.com" title="SundayMorning">SundayMorning</a>
            <p>A jQuery plugin to translate content on the fly.</p>
        </li>
        <li>
            <a href="http://facedetection.jaysalvat.com" title="Face Detection">Face Detection</a>
            <p>A jQuery plugin to detect faces in pictures.</p>
        </li>
    </ul>
    <span class="arrow"></span>
</div>
    
<div id="container">
	<div id="header">
		<h1>Face detection</h1>
		<h2>jQuery Plugin</h2>
	</div>
	
	<div id="content">
		<img id="faces" src="http://facedetection.jaysalvat.com/img/faces.jpg" width="300" height="400"/>
		<a href="#" id="detect">Click here!</a>
		<pre>var coords = $('#myPicture').faceDetection();</pre>
		<ul>
			<li>jQuery wrapper by <a href="http://jaysalvat.com">Jay Salvat</a></li>
			<li>Original Algorithm by <a href="https://github.com/liuliu/ccv">Liu Liu</a>.</li>
			<li>Source on <a href="https://github.com/jaysalvat/jquery.facedetection">Github</a></li>
		</ul>
	</div>
</div>
<div id="overlay">
Your browser is not compatible<br>
Please try with the latest versions of<br>
Firefox, Safari, Chrome<br>
or Internet Explorer 9
</div>
</body>
</html>
